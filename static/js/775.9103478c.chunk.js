"use strict";(self.webpackChunkdeal_crm=self.webpackChunkdeal_crm||[]).push([[775],{457:(e,n,t)=>{t.d(n,{A:()=>D});var a=t(9379),s=t(45),i=t(8139),l=t.n(i),r=t(5043),o=t(7121),c=t(7852),d=t(2306);function x(e,n){return Array.isArray(e)?e.includes(n):e===n}const m=r.createContext({});m.displayName="AccordionContext";const h=m;var u=t(579);const A=["as","bsPrefix","className","children","eventKey"],f=r.forwardRef(((e,n)=>{let{as:t="div",bsPrefix:i,className:o,children:m,eventKey:f}=e,j=(0,s.A)(e,A);const{activeEventKey:p}=(0,r.useContext)(h);return i=(0,c.oU)(i,"accordion-collapse"),(0,u.jsx)(d.A,(0,a.A)((0,a.A)({ref:n,in:x(p,f)},j),{},{className:l()(o,i),children:(0,u.jsx)(t,{children:r.Children.only(m)})}))}));f.displayName="AccordionCollapse";const j=f,p=r.createContext({eventKey:""});p.displayName="AccordionItemContext";const y=p,v=["as","bsPrefix","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],N=r.forwardRef(((e,n)=>{let{as:t="div",bsPrefix:i,className:o,onEnter:d,onEntering:x,onEntered:m,onExit:h,onExiting:A,onExited:f}=e,p=(0,s.A)(e,v);i=(0,c.oU)(i,"accordion-body");const{eventKey:N}=(0,r.useContext)(y);return(0,u.jsx)(j,{eventKey:N,onEnter:d,onEntering:x,onEntered:m,onExit:h,onExiting:A,onExited:f,children:(0,u.jsx)(t,(0,a.A)((0,a.A)({ref:n},p),{},{className:l()(o,i)}))})}));N.displayName="AccordionBody";const b=N,C=["as","bsPrefix","className","onClick"];const k=r.forwardRef(((e,n)=>{let{as:t="button",bsPrefix:i,className:o,onClick:d}=e,m=(0,s.A)(e,C);i=(0,c.oU)(i,"accordion-button");const{eventKey:A}=(0,r.useContext)(y),f=function(e,n){const{activeEventKey:t,onSelect:a,alwaysOpen:s}=(0,r.useContext)(h);return i=>{let l=e===t?null:e;s&&(l=Array.isArray(t)?t.includes(e)?t.filter((n=>n!==e)):[...t,e]:[e]),null==a||a(l,i),null==n||n(i)}}(A,d),{activeEventKey:j}=(0,r.useContext)(h);return"button"===t&&(m.type="button"),(0,u.jsx)(t,(0,a.A)((0,a.A)({ref:n,onClick:f},m),{},{"aria-expanded":Array.isArray(j)?j.includes(A):A===j,className:l()(o,i,!x(j,A)&&"collapsed")}))}));k.displayName="AccordionButton";const g=k,P=["as","aria-controls","bsPrefix","className","children","onClick"],_=r.forwardRef(((e,n)=>{let{as:t="h2","aria-controls":i,bsPrefix:r,className:o,children:d,onClick:x}=e,m=(0,s.A)(e,P);return r=(0,c.oU)(r,"accordion-header"),(0,u.jsx)(t,(0,a.A)((0,a.A)({ref:n},m),{},{className:l()(o,r),children:(0,u.jsx)(g,{onClick:x,"aria-controls":i,children:d})}))}));_.displayName="AccordionHeader";const w=_,E=["as","bsPrefix","className","eventKey"],I=r.forwardRef(((e,n)=>{let{as:t="div",bsPrefix:i,className:o,eventKey:d}=e,x=(0,s.A)(e,E);i=(0,c.oU)(i,"accordion-item");const m=(0,r.useMemo)((()=>({eventKey:d})),[d]);return(0,u.jsx)(y.Provider,{value:m,children:(0,u.jsx)(t,(0,a.A)((0,a.A)({ref:n},x),{},{className:l()(o,i)}))})}));I.displayName="AccordionItem";const S=I,K=["as","activeKey","bsPrefix","className","onSelect","flush","alwaysOpen"],O=r.forwardRef(((e,n)=>{const t=(0,o.Zw)(e,{activeKey:"onSelect"}),{as:i="div",activeKey:d,bsPrefix:x,className:m,onSelect:A,flush:f,alwaysOpen:j}=t,p=(0,s.A)(t,K),y=(0,c.oU)(x,"accordion"),v=(0,r.useMemo)((()=>({activeEventKey:d,onSelect:A,alwaysOpen:j})),[d,A,j]);return(0,u.jsx)(h.Provider,{value:v,children:(0,u.jsx)(i,(0,a.A)((0,a.A)({ref:n},p),{},{className:l()(m,y,f&&"".concat(y,"-flush"))}))})}));O.displayName="Accordion";const D=Object.assign(O,{Button:g,Collapse:j,Item:S,Header:w,Body:b})},3822:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(9397),s=t(9002),i=t(579);const l=e=>{let{openPageName:n}=e;const t=(0,s.zy)().pathname.split("/").filter(Boolean);return(0,i.jsxs)(a.A,{children:[(0,i.jsx)(a.A.Item,{linkAs:s.N_,linkProps:{to:"/"},children:"Home"}),t.map(((e,l)=>{const r="/"+t.slice(0,l+1).join("/");return l===t.length-1?(0,i.jsx)(a.A.Item,{active:!0,children:n},r):(0,i.jsx)(a.A.Item,{linkAs:s.N_,linkProps:{to:r},children:decodeURIComponent(e)},r)}))]})}},4287:(e,n,t)=>{t.d(n,{A:()=>h});var a=t(5043),s=t(3581),i=t(9379),l=t(1243),r=t(9853),o=t(8602),c=t(1072),d=t(4282),x=t(579);const m=e=>{let{id:n,handleCloseEditSidePanel:t}=e;const{plan:s,fetchPlan:m,updatePlan:h}=(0,l.O)(),[u,A]=(0,a.useState)({id:0,name:"",active:!0,construction_id:0}),[f,j]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{m(n)}),[]),(0,a.useEffect)((()=>{A({id:n,name:null===s||void 0===s?void 0:s.name,active:null===s||void 0===s?void 0:s.active,construction_id:null===s||void 0===s?void 0:s.construction_id})}),[s]),(0,x.jsx)(r.A,{noValidate:!0,validated:f,onSubmit:async e=>{const n=e.currentTarget;e.preventDefault(),!1===n.checkValidity()&&(e.preventDefault(),e.stopPropagation()),j(!0),!1!==n.checkValidity()&&(await h(u),A({id:0,name:"",active:!0,construction_id:0}),t())},children:(0,x.jsxs)(o.A,{className:"mb-3 text-start ",children:[(0,x.jsx)(c.A,{className:"mb-3 text-start ",children:(0,x.jsxs)(r.A.Group,{controlId:"validationCustom01",children:[(0,x.jsx)(r.A.Label,{children:"Plan Name"}),(0,x.jsx)(r.A.Control,{name:"name",required:!0,type:"text",placeholder:"Plan Name",value:u.name,onChange:e=>{A((0,i.A)((0,i.A)({},u),{},{[e.target.name]:e.target.value}))}}),(0,x.jsx)(r.A.Control.Feedback,{children:"Looks good!"})]})}),(0,x.jsx)(c.A,{className:"mb-3 text-start ",children:(0,x.jsx)(r.A.Group,{children:(0,x.jsx)(r.A.Check,{checked:u.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>A((0,i.A)((0,i.A)({},u),{},{active:e.target.checked}))})})}),(0,x.jsx)(d.A,{className:"mx-1",type:"submit",children:"Update"}),(0,x.jsx)(d.A,{onClick:t,className:"mx-1",variant:"danger",children:"Cancel"})]})})},h=e=>{let{id:n,showEditSidePanel:t,handleCloseEditSidePanel:a}=e;return(0,x.jsxs)(s.A,{show:t,onHide:a,placement:"end",children:[(0,x.jsx)(s.A.Header,{closeButton:!0,children:(0,x.jsx)(s.A.Title,{children:"Edit Plan"})}),(0,x.jsx)(s.A.Body,{children:(0,x.jsx)(m,{id:n,handleCloseEditSidePanel:a})})]})}},7775:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var a=t(5043),s=t(1243),i=t(3519),l=t(4282),r=t(1719),o=t(9002),c=t(4287),d=t(3822),x=t(9422),m=t(5328),h=t(9974),u=t(3581),A=t(9379),f=t(9853),j=t(8602),p=t(1072),y=t(8411),v=t(579);const N=e=>{let{handleClose:n,typeOfWorkId:t}=e;const i=(0,s.O)((e=>e.plan)),r=(0,y._)((e=>e.addPlanInformation)),[o,c]=(0,a.useState)({name:"",type_of_work_id:t,plan_id:i.id,text:"",file:null,type_of_file:""}),[d,x]=(0,a.useState)(!1),m=e=>{c((0,A.A)((0,A.A)({},o),{},{[e.target.name]:e.target.value}))};return(0,v.jsx)(f.A,{noValidate:!0,validated:d,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),x(!0),!1!==t.checkValidity()&&(await r(o),c({name:"",text:"",type_of_work_id:0,plan_id:i.id,file:null,type_of_file:""}),n())},children:(0,v.jsxs)(j.A,{className:"mb-3 text-start ",children:[(0,v.jsx)(p.A,{className:"mb-3 text-start ",children:(0,v.jsxs)(f.A.Group,{controlId:"validationCustom01",children:[(0,v.jsx)(f.A.Label,{children:"Name*"}),(0,v.jsx)(f.A.Control,{name:"name",required:!0,type:"text",placeholder:"Name",value:o.name,onChange:m}),(0,v.jsx)(f.A.Control.Feedback,{children:"Looks good!"})]})}),(0,v.jsx)(p.A,{className:"mb-3 text-start ",children:(0,v.jsxs)(f.A.Group,{controlId:"formFile",className:"mb-3",children:[(0,v.jsx)(f.A.Label,{children:"Default file input example"}),(0,v.jsx)(f.A.Control,{name:"file",onChange:e=>{e.target.files&&e.target.files.length>0&&c((0,A.A)((0,A.A)({},o),{},{file:e.target.files[0]}))},type:"file"})]})}),(0,v.jsx)(p.A,{className:"mb-3 text-start",children:(0,v.jsxs)(f.A.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,v.jsx)(f.A.Label,{children:"Text"}),(0,v.jsx)(f.A.Control,{className:"mb-3",as:"textarea",rows:3,name:"text",onChange:m})]})}),(0,v.jsx)(l.A,{className:"mx-1",type:"submit",children:"Create"}),(0,v.jsx)(l.A,{onClick:n,className:"mx-1",variant:"danger",children:"Cancel"})]})})},b=e=>{let{show:n,handleClose:t,typeOfWorkId:a}=e;return(0,v.jsxs)(u.A,{show:n,placement:"end",onHide:t,scroll:!0,children:[(0,v.jsx)(u.A.Header,{closeButton:!0,children:(0,v.jsx)(u.A.Title,{children:"Add Information"})}),(0,v.jsx)(u.A.Body,{children:(0,v.jsx)(N,{handleClose:t,typeOfWorkId:a})})]})};var C=t(457),k=t(8478);const g=e=>{let{src:n}=e;const[t,s]=(0,a.useState)(!0),i=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);return(0,a.useEffect)((()=>{(async()=>{try{(await fetch(n,{method:"HEAD"})).ok||s(!1)}catch(e){s(!1)}})()}),[n]),t?i?(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsxs)(l.A,{variant:"secondary",className:"mb-2",onClick:()=>window.location.href=n,children:[(0,v.jsx)("i",{className:"bi bi-file-earmark-pdf me-2"}),"Open File"]})}):(0,v.jsx)("iframe",{src:n,style:{width:"100%",height:"800px",border:"none"}}):(0,v.jsxs)("p",{children:[(0,v.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"PDF-file not find"]})};var P=t(3083);const _=e=>{let{id:n,showDeleteModal:t,handleCloseDeleteModal:a}=e;const{plan:i}=(0,s.O)(),{deletePlanInformation:r}=(0,y._)();return(0,v.jsxs)(P.A,{show:t,onHide:a,centered:!0,children:[(0,v.jsx)(P.A.Header,{closeButton:!0,children:(0,v.jsx)(P.A.Title,{children:"Warning"})}),(0,v.jsx)(P.A.Body,{children:"Are you sure you want to delete this information?"}),(0,v.jsxs)(P.A.Footer,{children:[(0,v.jsx)(l.A,{variant:"secondary",onClick:a,children:"Cancel"}),(0,v.jsx)(l.A,{variant:"danger",onClick:()=>{a(),r(n,i.id)},children:"Delete"})]})]})},w=e=>{let{planInformations:n,type_of_work_id:t}=e;const[s,i]=(0,a.useState)(0),[r,o]=(0,a.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(C.A,{children:n.filter((e=>e.type_of_work_id===t)).map((e=>(0,v.jsxs)(C.A.Item,{eventKey:e.id.toString(),children:[(0,v.jsx)(C.A.Header,{children:e.name}),(0,v.jsxs)(C.A.Body,{children:[(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsxs)(l.A,{className:"m-1",variant:"danger",onClick:()=>(e=>{i(e),o(!0)})(e.id),children:[(0,v.jsx)("i",{className:"bi bi-trash me-2"}),"Delete"]})}),e.text&&(0,v.jsx)("pre",{children:e.text}),e.type_of_file&&("application/pdf"!==e.type_of_file?(0,v.jsx)("img",{style:{maxWidth:"100%"},src:k.x+"/uploads/"+e.file}):(0,v.jsx)(g,{src:k.x+"/uploads/"+e.file}))]})]})))}),(0,v.jsx)(_,{id:s,showDeleteModal:r,handleCloseDeleteModal:()=>{o(!1),i(0)}})]})},E=e=>{let{plan_id:n}=e;const{typesOfWork:t,fetchActiveTypesOfWork:s}=(0,h.D)(),{planInformations:i,fetchPlanInformationsInPlan:r}=(0,y._)(),[o,c]=(0,a.useState)(0),[d,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{s(),r(n)}),[n]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h4",{children:"Types Of Work"}),(0,v.jsx)(x.A,{defaultActiveKey:"0",id:"uncontrolled-tab-example",className:"mb-3",children:t.map(((e,n)=>(0,v.jsxs)(m.A,{eventKey:n,title:e.name,children:[(0,v.jsx)("div",{className:"d-flex justify-content-end",children:(0,v.jsxs)(l.A,{className:"mb-3",variant:"primary",onClick:()=>{return n=e.id,u(!0),void c(n);var n},children:[(0,v.jsx)("i",{className:"me-2 bi bi-plus-circle"}),"Add"]})}),(0,v.jsx)(w,{planInformations:i,type_of_work_id:e.id})]},e.id)))}),(0,v.jsx)(b,{show:d,handleClose:()=>u(!1),typeOfWorkId:o})]})},I=()=>{const{plan:e,fetchPlan:n}=(0,s.O)(),t=(0,o.Zp)(),{company_id:x,id:m}=(0,o.g)(),h=Number(m),u=Number(x),[A,f]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{n(h)}),[A]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(i.A,{children:[(0,v.jsx)("h1",{children:e.name}),(0,v.jsx)("hr",{}),(0,v.jsx)(l.A,{className:"me-2",variant:"outline-secondary",onClick:()=>t("/companies/".concat(u,"/").concat(e.construction_id)),children:(0,v.jsx)("i",{className:"bi bi-arrow-left-circle"})}),(0,v.jsxs)(l.A,{className:"ms-3",variant:"outline-secondary",onClick:()=>(e.id,void f(!0)),children:[(0,v.jsx)("i",{className:"bi bi-pencil me-2"}),"Edit"]}),(0,v.jsx)("hr",{}),(0,v.jsx)(d.A,{openPageName:e.name}),!e.active&&(0,v.jsx)(r.A,{variant:"secondary",children:"Not active!"},"secondary"),(0,v.jsx)("hr",{}),(0,v.jsx)(E,{plan_id:e.id})]}),(0,v.jsx)(c.A,{id:e.id,showEditSidePanel:A,handleCloseEditSidePanel:()=>{f(!1)}})]})}}}]);
//# sourceMappingURL=775.9103478c.chunk.js.map