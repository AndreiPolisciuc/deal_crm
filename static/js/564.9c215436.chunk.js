"use strict";(self.webpackChunkdeal_crm=self.webpackChunkdeal_crm||[]).push([[564],{1386:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(5043),s=n(3581),l=n(9379),i=n(4889),c=n(9853),d=n(8602),o=n(1072),r=n(4282),h=n(579);const x=e=>{let{id:t,handleCloseEditSidePanel:n}=e;const{construction:s,fetchConstruction:x,updateConstruction:m}=(0,i.g)(),[j,u]=(0,a.useState)({id:0,name:"",text:"",active:!0,location:"",company_id:0}),[A,p]=(0,a.useState)(!1),v=e=>{u((0,l.A)((0,l.A)({},j),{},{[e.target.name]:e.target.value}))};return(0,a.useEffect)((()=>{x(t)}),[]),(0,a.useEffect)((()=>{u({id:t,name:null===s||void 0===s?void 0:s.name,text:null===s||void 0===s?void 0:s.text,active:null===s||void 0===s?void 0:s.active,company_id:null===s||void 0===s?void 0:s.company_id,location:null===s||void 0===s?void 0:s.location})}),[s]),(0,h.jsx)(c.A,{noValidate:!0,validated:A,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),p(!0),!1!==t.checkValidity()&&(await m(j),u({id:0,name:"",text:"",active:!0,location:"",company_id:0}),n())},children:(0,h.jsxs)(d.A,{className:"mb-3 text-start ",children:[(0,h.jsx)(o.A,{className:"mb-3 text-start ",children:(0,h.jsxs)(c.A.Group,{controlId:"validationCustom01",children:[(0,h.jsx)(c.A.Label,{children:"Construction Name"}),(0,h.jsx)(c.A.Control,{name:"name",required:!0,type:"text",placeholder:"Construction Name",value:j.name,onChange:v}),(0,h.jsx)(c.A.Control.Feedback,{children:"Looks good!"})]})}),(0,h.jsx)(o.A,{className:"mb-3 text-start ",children:(0,h.jsxs)(c.A.Group,{controlId:"validationCustom01",children:[(0,h.jsx)(c.A.Label,{children:"Location"}),(0,h.jsx)(c.A.Control,{name:"location",type:"text",placeholder:"Location",value:j.location,onChange:v}),(0,h.jsx)(c.A.Control.Feedback,{children:"Looks good!"})]})}),(0,h.jsx)(o.A,{className:"mb-3 text-start ",children:(0,h.jsx)(c.A.Group,{children:(0,h.jsx)(c.A.Check,{checked:j.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>u((0,l.A)((0,l.A)({},j),{},{active:e.target.checked}))})})}),(0,h.jsx)(o.A,{className:"mb-3 text-start",children:(0,h.jsxs)(c.A.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,h.jsx)(c.A.Label,{children:"Text"}),(0,h.jsx)(c.A.Control,{className:"mb-3",as:"textarea",rows:3,name:"text",value:j.text,onChange:v})]})}),(0,h.jsx)(r.A,{className:"mx-1",type:"submit",children:"Update"}),(0,h.jsx)(r.A,{onClick:n,className:"mx-1",variant:"danger",children:"Cancel"})]})})},m=e=>{let{id:t,showEditSidePanel:n,handleCloseEditSidePanel:a}=e;return(0,h.jsxs)(s.A,{show:n,onHide:a,placement:"end",children:[(0,h.jsx)(s.A.Header,{closeButton:!0,children:(0,h.jsx)(s.A.Title,{children:"Edit Construction"})}),(0,h.jsx)(s.A.Body,{children:(0,h.jsx)(x,{id:t,handleCloseEditSidePanel:a})})]})}},1564:(e,t,n)=>{n.r(t),n.d(t,{default:()=>z});var a=n(5043),s=n(9002),l=n(4889),i=n(3519),c=n(4282),d=n(1719),o=n(9422),r=n(5328),h=n(3822),x=n(1386),m=n(1243),j=n(4196),u=n(3083),A=n(579);const p=e=>{let{id:t,construction_id:n,showDeleteModal:a,handleCloseDeleteModal:s}=e;const{deletePlan:l}=(0,m.O)();return(0,A.jsxs)(u.A,{show:a,onHide:s,centered:!0,children:[(0,A.jsx)(u.A.Header,{closeButton:!0,children:(0,A.jsx)(u.A.Title,{children:"Warning"})}),(0,A.jsx)(u.A.Body,{children:"Are you sure you want to delete the plan?"}),(0,A.jsxs)(u.A.Footer,{children:[(0,A.jsx)(c.A,{variant:"secondary",onClick:s,children:"Cancel"}),(0,A.jsx)(c.A,{variant:"danger",onClick:()=>{s(),l(t,n)},children:"Delete"})]})]})};var v=n(4287);const C=e=>{let{construction_id:t}=e;const{plans:n,fetchPlansInConstruction:l}=(0,m.O)(),[i,d]=(0,a.useState)(0),{company_id:o}=(0,s.g)(),[r,h]=(0,a.useState)(!1),[x,u]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{l(t)}),[t]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(j.A,{striped:!0,bordered:!0,hover:!0,children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"#"}),(0,A.jsx)("th",{className:"text-start",children:"Name"}),(0,A.jsx)("th",{children:"Created at"}),(0,A.jsx)("th",{children:"Action"})]})}),(0,A.jsx)("tbody",{children:n.map((e=>(0,A.jsxs)("tr",{className:e.active?"":"table-secondary text-muted",children:[(0,A.jsx)("td",{className:"align-middle",children:e.id}),(0,A.jsx)("td",{className:"text-start",children:(0,A.jsx)(s.N_,{to:"/companies/".concat(o,"/").concat(e.construction_id,"/").concat(e.id),children:e.name})}),(0,A.jsx)("td",{className:"align-middle w-25",children:new Date(e.created_at).toLocaleString()}),(0,A.jsxs)("td",{className:"align-middle align-middle",children:[(0,A.jsx)(c.A,{variant:"secondary",className:"m-1",onClick:()=>(e=>{d(e),u(!0)})(e.id),children:(0,A.jsx)("i",{className:"bi bi-pencil"})}),(0,A.jsx)(c.A,{className:"m-1",variant:"danger",onClick:()=>(e=>{d(e),h(!0)})(e.id),children:(0,A.jsx)("i",{className:"bi bi-trash"})})]})]},e.id)))})]}),(0,A.jsx)(p,{id:i,construction_id:t,showDeleteModal:r,handleCloseDeleteModal:()=>{h(!1),d(0)}}),(0,A.jsx)(v.A,{id:i,showEditSidePanel:x,handleCloseEditSidePanel:()=>{u(!1),d(0)}})]})};var b=n(3581),g=n(9379),y=n(714),N=n(9853),_=n(8602),k=n(1072);const f=e=>{let{handleClose:t}=e;const n=(0,l.g)((e=>e.construction)),[s,i]=(0,a.useState)({name:0,construction_id:n.id,plan_id:"",unit:"",street:"",state:"CA",zip_code:"",city:""}),[d,o]=(0,a.useState)(!1),r=(0,y.j)((e=>e.addHouse)),{plans:h,fetchPlansInConstruction:x}=(0,m.O)(),j=e=>{i((0,g.A)((0,g.A)({},s),{},{[e.target.name]:e.target.value}))};return(0,a.useEffect)((()=>{x(n.id)}),[]),(0,A.jsx)(N.A,{noValidate:!0,validated:d,onSubmit:async e=>{const n=e.currentTarget;e.preventDefault(),!1===n.checkValidity()&&(e.preventDefault(),e.stopPropagation()),o(!0),!1!==n.checkValidity()&&(await r(s),i((0,g.A)((0,g.A)({},s),{},{name:0,plan_id:"",unit:"",street:"",state:"CA",zip_code:"",city:""})),t())},children:(0,A.jsxs)(_.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{controlId:"validationCustom01",children:[(0,A.jsx)(N.A.Label,{children:"House Name*"}),(0,A.jsx)(N.A.Control,{name:"name",required:!0,type:"number",placeholder:"House Name",value:s.name,onChange:j}),(0,A.jsx)(N.A.Control.Feedback,{children:"Looks good!"})]})}),(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{controlId:"validationPlan",children:[(0,A.jsx)(N.A.Label,{children:"Plan*"}),(0,A.jsxs)(N.A.Select,{required:!0,name:"plan_id",value:s.plan_id,onChange:j,children:[(0,A.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select a plan"}),h.map((e=>(0,A.jsx)("option",{value:e.id,children:e.name})))]}),(0,A.jsx)(N.A.Control.Feedback,{children:"Looks good!"})]})}),(0,A.jsx)("h6",{children:"Address"}),(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Street"}),(0,A.jsx)(N.A.Control,{name:"street",type:"text",placeholder:"2557 Albatross Wy",value:s.street,onChange:j})]})}),(0,A.jsxs)(k.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Unit"}),(0,A.jsx)(N.A.Control,{name:"unit",type:"text",placeholder:"Unit B",value:s.unit,onChange:j})]})}),(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"City"}),(0,A.jsx)(N.A.Control,{name:"city",type:"text",placeholder:"Sacramento",value:s.city,onChange:j})]})})]}),(0,A.jsxs)(k.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"State"}),(0,A.jsx)(N.A.Control,{name:"state",type:"text",placeholder:"CA",value:s.state,onChange:j})]})}),(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Zip"}),(0,A.jsx)(N.A.Control,{name:"zip_code",type:"text",placeholder:"95815",value:s.zip_code,onChange:j})]})})]}),(0,A.jsx)(c.A,{className:"mx-1",type:"submit",children:"Create"}),(0,A.jsx)(c.A,{onClick:t,className:"mx-1",variant:"danger",children:"Cancel"})]})})},S=e=>{let{handleClose:t}=e;const n=(0,l.g)((e=>e.construction)),[s,i]=(0,a.useState)({name:"",construction_id:n.id}),[d,o]=(0,a.useState)(!1),r=(0,m.O)((e=>e.addPlan));return(0,A.jsx)(N.A,{noValidate:!0,validated:d,onSubmit:async e=>{const n=e.currentTarget;e.preventDefault(),!1===n.checkValidity()&&(e.preventDefault(),e.stopPropagation()),o(!0),!1!==n.checkValidity()&&(await r(s),i((0,g.A)((0,g.A)({},s),{},{name:""})),t())},children:(0,A.jsxs)(_.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{controlId:"validationCustom01",children:[(0,A.jsx)(N.A.Label,{children:"Plan Name*"}),(0,A.jsx)(N.A.Control,{name:"name",required:!0,type:"text",placeholder:"Plan Name",value:s.name,onChange:e=>{i((0,g.A)((0,g.A)({},s),{},{[e.target.name]:e.target.value}))}}),(0,A.jsx)(N.A.Control.Feedback,{children:"Looks good!"})]})}),(0,A.jsx)(c.A,{className:"mx-1",type:"submit",children:"Create"}),(0,A.jsx)(c.A,{onClick:t,className:"mx-1",variant:"danger",children:"Cancel"})]})})},w=e=>{let{nameAction:t,show:n,handleClose:a}=e,s=(0,A.jsx)("h2",{children:"Error"});switch(t){case"Create House":s=(0,A.jsx)(f,{handleClose:a});break;case"Create Plan":s=(0,A.jsx)(S,{handleClose:a})}return(0,A.jsxs)(b.A,{show:n,placement:"end",onHide:a,scroll:!0,children:[(0,A.jsx)(b.A.Header,{closeButton:!0,children:(0,A.jsx)(b.A.Title,{children:t})}),(0,A.jsx)(b.A.Body,{children:s})]})};var P=n(8628);const E=e=>{let{id:t,construction_id:n,showDeleteModal:a,handleCloseDeleteModal:s}=e;const{deleteHouse:l}=(0,y.j)();return(0,A.jsxs)(u.A,{show:a,onHide:s,centered:!0,children:[(0,A.jsx)(u.A.Header,{closeButton:!0,children:(0,A.jsx)(u.A.Title,{children:"Warning"})}),(0,A.jsx)(u.A.Body,{children:"Are you sure you want to delete the house?"}),(0,A.jsxs)(u.A.Footer,{children:[(0,A.jsx)(c.A,{variant:"secondary",onClick:s,children:"Cancel"}),(0,A.jsx)(c.A,{variant:"danger",onClick:()=>{s(),l(t,n)},children:"Delete"})]})]})};var L=n(9657);const H=e=>{let{id:t,handleCloseEditSidePanel:n}=e;const{house:s,fetchHouse:l,updateHouse:i}=(0,y.j)(),[d,o]=(0,a.useState)({id:0,name:0,active:!0,construction_id:0,plan_id:0,state:"CA",city:"",street:"",unit:"",zip_code:""}),{plans:r,fetchPlansInConstruction:h}=(0,m.O)(),[x,j]=(0,a.useState)(!1),u=e=>{o((0,g.A)((0,g.A)({},d),{},{[e.target.name]:e.target.value}))};return(0,a.useEffect)((()=>{l(t)}),[]),(0,a.useEffect)((()=>{o((0,g.A)({},s)),h(s.construction_id)}),[s]),(0,A.jsx)(N.A,{noValidate:!0,validated:x,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),j(!0),!1!==t.checkValidity()&&(await i(d),o({id:0,name:0,active:!0,construction_id:0,plan_id:0,state:"CA",city:"",street:"",unit:"",zip_code:""}),n())},children:(0,A.jsxs)(_.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{controlId:"validationCustom01",children:[(0,A.jsx)(N.A.Label,{children:"House Name"}),(0,A.jsx)(N.A.Control,{name:"name",required:!0,type:"number",placeholder:"House Name",value:d.name,onChange:u}),(0,A.jsx)(N.A.Control.Feedback,{children:"Looks good!"})]})}),(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{controlId:"validationPlan",children:[(0,A.jsx)(N.A.Label,{children:"Plan*"}),(0,A.jsxs)(N.A.Select,{required:!0,name:"plan_id",value:d.plan_id,onChange:u,children:[(0,A.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select a plan"}),r.map((e=>(0,A.jsx)("option",{value:e.id,children:e.name})))]}),(0,A.jsx)(N.A.Control.Feedback,{children:"Looks good!"})]})}),(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsx)(N.A.Group,{children:(0,A.jsx)(N.A.Check,{checked:d.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>o((0,g.A)((0,g.A)({},d),{},{active:e.target.checked}))})})}),(0,A.jsx)("h6",{children:"Address"}),(0,A.jsx)(k.A,{className:"mb-3 text-start ",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Street"}),(0,A.jsx)(N.A.Control,{name:"street",type:"text",placeholder:"2557 Albatross Wy",value:d.street,onChange:u})]})}),(0,A.jsxs)(k.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Unit"}),(0,A.jsx)(N.A.Control,{name:"unit",type:"text",placeholder:"Unit B",value:d.unit,onChange:u})]})}),(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"City"}),(0,A.jsx)(N.A.Control,{name:"city",type:"text",placeholder:"Sacramento",value:d.city,onChange:u})]})})]}),(0,A.jsxs)(k.A,{className:"mb-3 text-start ",children:[(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"State"}),(0,A.jsx)(N.A.Control,{name:"state",type:"text",placeholder:"CA",value:d.state,onChange:u})]})}),(0,A.jsx)(_.A,{md:"6",children:(0,A.jsxs)(N.A.Group,{children:[(0,A.jsx)(N.A.Label,{children:"Zip"}),(0,A.jsx)(N.A.Control,{name:"zip_code",type:"text",placeholder:"95815",value:d.zip_code,onChange:u})]})})]}),(0,A.jsx)(c.A,{className:"mx-1",type:"submit",children:"Update"}),(0,A.jsx)(c.A,{onClick:n,className:"mx-1",variant:"danger",children:"Cancel"})]})})},D=e=>{let{id:t,showEditSidePanel:n,handleCloseEditSidePanel:a}=e;return(0,A.jsxs)(b.A,{show:n,onHide:a,placement:"end",children:[(0,A.jsx)(b.A.Header,{closeButton:!0,children:(0,A.jsx)(b.A.Title,{children:"Edit House"})}),(0,A.jsx)(b.A.Body,{children:(0,A.jsx)(H,{id:t,handleCloseEditSidePanel:a})})]})},G=e=>{let{construction_id:t}=e;const{houses:n,fetchHousesInConstruction:l,housesStatuses:i,fetchHousesStatuses:d}=(0,y.j)(),{plans:o}=(0,m.O)(),r=(0,L.Ub)({maxWidth:767}),[h,x]=(0,a.useState)(0),{company_id:u}=(0,s.g)(),[p,v]=(0,a.useState)(!1),C=()=>{v(!1),x(0)},b=e=>{x(e),v(!0)},[g,N]=(0,a.useState)(!1),_=()=>{N(!1),x(0)},k=e=>{x(e),N(!0)};return(0,a.useEffect)((()=>{l(t)}),[t]),(0,a.useEffect)((()=>{d(t)}),[n]),r?(0,A.jsxs)(A.Fragment,{children:[n.map((e=>{var t;return(0,A.jsx)(P.A,{className:"mb-2",children:(0,A.jsxs)(P.A.Body,{children:[(0,A.jsxs)("strong",{children:["Lot ",e.name]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"me-2",children:"Plan:"}),(()=>{const t=o.find((t=>t.id===e.plan_id));return t?(0,A.jsx)(s.N_,{to:"/companies/".concat(u,"/").concat(e.construction_id,"/").concat(t.id),children:t.name}):"Unknown"})()]}),e.street&&e.city&&e.zip_code&&(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"text-start me-2 d-block",children:"Address:"}),(0,A.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(e.street," ").concat(e.unit,", ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code,", USA"))),target:"_blank",rel:"noopener noreferrer",children:[e.street," ",e.unit,", ",e.city,", ",e.state," ",e.zip_code,", USA"]})]}),(0,A.jsx)("hr",{}),(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"d-block",children:"Statuses:"}),null===(t=i.filter((t=>t.house_id===e.id)))||void 0===t?void 0:t.map(((e,t)=>(0,A.jsxs)("span",{className:"badge text-white px-2 py-1 m-1",style:{backgroundColor:e.status_color,fontSize:"0.9rem"},children:[(0,A.jsxs)("strong",{children:[e.type_of_work_name,":"]})," ",e.status_name]},t)))]}),(0,A.jsx)("hr",{}),(0,A.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,A.jsx)(c.A,{variant:"secondary",className:"m-1 px-4",onClick:()=>k(e.id),children:(0,A.jsx)("i",{className:"bi bi-pencil"})}),e.street&&e.city&&e.zip_code&&(0,A.jsx)(c.A,{className:"m-1 px-4",variant:"secondary",href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(e.street," ").concat(e.unit,", ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code,", USA"))),target:"_blank",children:(0,A.jsx)("i",{className:"bi bi-geo-alt-fill"})}),(0,A.jsx)(c.A,{className:"m-1 px-4",variant:"danger",onClick:()=>b(e.id),children:(0,A.jsx)("i",{className:"bi bi-trash"})})]})]})},e.id)})),(0,A.jsx)(E,{id:h,construction_id:t,showDeleteModal:p,handleCloseDeleteModal:C}),(0,A.jsx)(D,{id:h,showEditSidePanel:g,handleCloseEditSidePanel:_})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(j.A,{striped:!0,bordered:!0,hover:!0,responsive:"sm",children:[(0,A.jsx)("thead",{children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"#"}),(0,A.jsx)("th",{className:"text-start",children:"Name"}),(0,A.jsx)("th",{children:"Plan"}),(0,A.jsx)("th",{children:"Status"}),(0,A.jsx)("th",{children:"Action"})]})}),(0,A.jsx)("tbody",{children:n.map((e=>{var t;return(0,A.jsxs)("tr",{className:e.active?"":"table-secondary text-muted",children:[(0,A.jsx)("td",{className:"align-middle",children:e.id}),(0,A.jsxs)("td",{className:"text-start align-middle",children:[(0,A.jsxs)("b",{children:["Lot ",e.name]}),e.street&&e.city&&e.zip_code&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("hr",{}),(0,A.jsx)("span",{className:"text-start me-2 d-block",children:"Address:"}),(0,A.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(e.street," ").concat(e.unit,", ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code,", USA"))),target:"_blank",rel:"noopener noreferrer",children:[e.street," ",e.unit,", ",e.city,", ",e.state," ",e.zip_code,", USA"]})]})]}),(0,A.jsx)("td",{className:"align-middle",children:(()=>{const t=o.find((t=>t.id===e.plan_id));return t?(0,A.jsx)(s.N_,{to:"/companies/".concat(u,"/").concat(e.construction_id,"/").concat(t.id),children:t.name}):"Unknown"})()}),(0,A.jsx)("td",{className:"align-middle",children:null===(t=i.filter((t=>t.house_id===e.id)))||void 0===t?void 0:t.map(((e,t)=>(0,A.jsxs)("span",{className:"badge text-white px-2 py-1 m-1",style:{backgroundColor:e.status_color,fontSize:"0.9rem"},children:[(0,A.jsxs)("strong",{children:[e.type_of_work_name,":"]})," ",e.status_name]},t)))}),(0,A.jsxs)("td",{className:"align-middle",children:[(0,A.jsx)(c.A,{variant:"secondary",className:"m-1",onClick:()=>k(e.id),children:(0,A.jsx)("i",{className:"bi bi-pencil"})}),e.street&&e.city&&e.zip_code&&(0,A.jsx)(c.A,{className:"m-1",variant:"secondary",href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(e.street," ").concat(e.unit,", ").concat(e.city,", ").concat(e.state," ").concat(e.zip_code,", USA"))),target:"_blank",children:(0,A.jsx)("i",{className:"bi bi-geo-alt-fill"})}),(0,A.jsx)(c.A,{className:"m-1",variant:"danger",onClick:()=>b(e.id),children:(0,A.jsx)("i",{className:"bi bi-trash"})})]})]},e.id)}))})]}),(0,A.jsx)(E,{id:h,construction_id:t,showDeleteModal:p,handleCloseDeleteModal:C}),(0,A.jsx)(D,{id:h,showEditSidePanel:g,handleCloseEditSidePanel:_})]})},z=()=>{const{company_id:e,id:t}=(0,s.g)(),n=Number(t),m=Number(e),{construction:j,fetchConstruction:u}=(0,l.g)(),p=(0,s.Zp)(),[v,b]=(0,a.useState)(!1),[g,y]=(0,a.useState)(!1),[N,_]=(0,a.useState)(""),k=e=>{_(e),y(!0)};return(0,a.useEffect)((()=>{u(n)}),[v]),(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(i.A,{children:[(0,A.jsxs)("h1",{children:[j.name," "]}),(0,A.jsx)("hr",{}),(0,A.jsx)(c.A,{className:"me-2",variant:"outline-secondary",onClick:()=>p("/companies/".concat(m)),children:(0,A.jsx)("i",{className:"bi bi-arrow-left-circle"})}),j.location&&(0,A.jsxs)(c.A,{className:"mx-1",variant:"outline-secondary",href:j.location,target:"_blank",children:[(0,A.jsx)("i",{className:"bi bi-geo-alt-fill me-2"}),"Location"]}),(0,A.jsxs)(c.A,{className:"ms-3",variant:"outline-secondary",onClick:()=>(j.id,void b(!0)),children:[(0,A.jsx)("i",{className:"bi bi-pencil me-2"}),"Edit"]}),(0,A.jsx)("hr",{}),(0,A.jsx)(h.A,{openPageName:j.name}),!j.active&&(0,A.jsx)(d.A,{variant:"secondary",children:"Not active!"},"secondary"),(0,A.jsx)("hr",{}),(0,A.jsxs)(o.A,{defaultActiveKey:"Houses",id:"uncontrolled-tab-example",className:"mb-3",children:[(0,A.jsx)(r.A,{eventKey:"Houses",title:"Houses",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,A.jsx)("h4",{children:"Houses"}),(0,A.jsxs)(c.A,{variant:"primary",onClick:()=>k("Create House"),children:[(0,A.jsx)("i",{className:"me-2 bi bi-plus-circle"}),"Add House"]})]}),(0,A.jsx)(G,{construction_id:j.id})]})},"Houses"),(0,A.jsx)(r.A,{eventKey:"Plans",title:"Plans",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,A.jsx)("h4",{children:"Plans"}),(0,A.jsxs)(c.A,{variant:"primary",onClick:()=>k("Create Plan"),children:[(0,A.jsx)("i",{className:"me-2 bi bi-plus-circle"}),"Add Plan"]})]}),(0,A.jsx)(C,{construction_id:j.id})]})},"Plans")]})]}),(0,A.jsx)(w,{nameAction:N,show:g,handleClose:()=>y(!1)}),(0,A.jsx)(x.A,{id:n,showEditSidePanel:v,handleCloseEditSidePanel:()=>{b(!1)}})]})}},3822:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(9397),s=n(9002),l=n(579);const i=e=>{let{openPageName:t}=e;const n=(0,s.zy)().pathname.split("/").filter(Boolean);return(0,l.jsxs)(a.A,{children:[(0,l.jsx)(a.A.Item,{linkAs:s.N_,linkProps:{to:"/"},children:"Home"}),n.map(((e,i)=>{const c="/"+n.slice(0,i+1).join("/");return i===n.length-1?(0,l.jsx)(a.A.Item,{active:!0,children:t},c):(0,l.jsx)(a.A.Item,{linkAs:s.N_,linkProps:{to:c},children:decodeURIComponent(e)},c)}))]})}},4287:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(5043),s=n(3581),l=n(9379),i=n(1243),c=n(9853),d=n(8602),o=n(1072),r=n(4282),h=n(579);const x=e=>{let{id:t,handleCloseEditSidePanel:n}=e;const{plan:s,fetchPlan:x,updatePlan:m}=(0,i.O)(),[j,u]=(0,a.useState)({id:0,name:"",active:!0,construction_id:0}),[A,p]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{x(t)}),[]),(0,a.useEffect)((()=>{u({id:t,name:null===s||void 0===s?void 0:s.name,active:null===s||void 0===s?void 0:s.active,construction_id:null===s||void 0===s?void 0:s.construction_id})}),[s]),(0,h.jsx)(c.A,{noValidate:!0,validated:A,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),p(!0),!1!==t.checkValidity()&&(await m(j),u({id:0,name:"",active:!0,construction_id:0}),n())},children:(0,h.jsxs)(d.A,{className:"mb-3 text-start ",children:[(0,h.jsx)(o.A,{className:"mb-3 text-start ",children:(0,h.jsxs)(c.A.Group,{controlId:"validationCustom01",children:[(0,h.jsx)(c.A.Label,{children:"Plan Name"}),(0,h.jsx)(c.A.Control,{name:"name",required:!0,type:"text",placeholder:"Plan Name",value:j.name,onChange:e=>{u((0,l.A)((0,l.A)({},j),{},{[e.target.name]:e.target.value}))}}),(0,h.jsx)(c.A.Control.Feedback,{children:"Looks good!"})]})}),(0,h.jsx)(o.A,{className:"mb-3 text-start ",children:(0,h.jsx)(c.A.Group,{children:(0,h.jsx)(c.A.Check,{checked:j.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>u((0,l.A)((0,l.A)({},j),{},{active:e.target.checked}))})})}),(0,h.jsx)(r.A,{className:"mx-1",type:"submit",children:"Update"}),(0,h.jsx)(r.A,{onClick:n,className:"mx-1",variant:"danger",children:"Cancel"})]})})},m=e=>{let{id:t,showEditSidePanel:n,handleCloseEditSidePanel:a}=e;return(0,h.jsxs)(s.A,{show:n,onHide:a,placement:"end",children:[(0,h.jsx)(s.A.Header,{closeButton:!0,children:(0,h.jsx)(s.A.Title,{children:"Edit Plan"})}),(0,h.jsx)(s.A.Body,{children:(0,h.jsx)(x,{id:t,handleCloseEditSidePanel:a})})]})}}}]);
//# sourceMappingURL=564.9c215436.chunk.js.map