"use strict";(self.webpackChunkdeal_crm=self.webpackChunkdeal_crm||[]).push([[975],{2913:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(5043),c=s(9853),n=s(4282),r=s(714),o=s(579);const i=e=>{let{id:t,note:s,filterHouses:i}=e;const{changeNote:l}=(0,r.j)(),[d,h]=(0,a.useState)(s);return(0,o.jsxs)(c.A,{children:[(0,o.jsx)(c.A.Group,{controlId:"noteText",children:(0,o.jsx)(c.A.Control,{as:"textarea",rows:3,placeholder:"Input note...",value:d,onChange:e=>h(e.target.value)})}),(0,o.jsx)(n.A,{variant:"primary",className:"mt-2",onClick:async()=>{await l(t,d),i()},children:"Save"})]})}},5975:(e,t,s)=>{s.r(t),s.d(t,{default:()=>g});var a=s(5043),c=s(3519),n=s(4196),r=s(4282),o=s(9853),i=s(8628),l=s(9204),d=s(807),h=s(714),u=s(9657),m=s(9002),x=s(2913),j=s(579);const g=()=>{const{statuses:e,fetchStatuses:t}=(0,l.X)(),{user:s,fetchUser:g}=(0,d.k)(),{housesFiltered:p,fetchFilterHouses:_,changeStatus:y}=(0,h.j)(),w=new Date,f=w.getFullYear(),b=String(w.getMonth()+1).padStart(2,"0"),v=String(w.getDate()).padStart(2,"0"),A="".concat(f,"-").concat(b,"-").concat(v," 12:00:00"),N=(0,u.Ub)({maxWidth:767});p.sort(((e,t)=>new Date(e.target_date).getTime()-new Date(t.target_date).getTime()));const S={};for(const a of p){const e=a.target_date.slice(0,10);S[e]||(S[e]=[]),S[e].push(a)}(0,a.useEffect)((()=>{t(),g(2),k()}),[]);const k=()=>{_("","","2","","",A)};return(0,j.jsxs)(c.A,{children:[(0,j.jsx)("h1",{children:"Dashboard"}),(0,j.jsx)("hr",{}),(0,j.jsx)("h4",{children:s.name}),N?Object.entries(S).map((t=>{let[s,a]=t;return(0,j.jsxs)("div",{children:[(0,j.jsx)("h5",{children:s}),(0,j.jsx)(j.Fragment,{children:a.map((t=>(0,j.jsx)(i.A,{className:"mb-2",children:(0,j.jsxs)(i.A.Body,{children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("b",{children:["Lot ",t.house_name]}),(0,j.jsxs)("div",{className:"d-block",children:[(0,j.jsx)(m.N_,{className:"me-2",to:"/companies/".concat(t.company_id,"/").concat(t.construction_id),children:t.construction_name}),(0,j.jsx)("i",{children:(0,j.jsxs)(m.N_,{to:"/companies/".concat(t.company_id,"/").concat(t.construction_id,"/").concat(t.plan_id),children:["(",t.plan_name,")"]})})]})]}),t.street&&t.city&&t.zip_code&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{}),(0,j.jsx)("span",{className:"text-start me-2 d-block",children:"Address:"}),(0,j.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(t.street," ").concat(t.unit,", ").concat(t.city,", ").concat(t.state," ").concat(t.zip_code,", USA"))),target:"_blank",rel:"noopener noreferrer",children:[t.street," ",t.unit,", ",t.city,", ",t.state," ",t.zip_code,", USA"]})]}),(0,j.jsx)("hr",{}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"me-1",children:"Type Of Work:"}),t.type_of_work_name]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("span",{className:"d-block",children:"Status:"}),(0,j.jsx)(o.A.Select,{required:!0,name:"status_id",style:{backgroundColor:t.status_color,color:"white"},onChange:async e=>{const s=e.target.value;await y(t.id,s),k()},children:e.map((e=>(0,j.jsx)("option",{style:{backgroundColor:e.color},selected:e.id===t.status_id,value:e.id,children:e.name})))})]}),(0,j.jsx)("hr",{}),(0,j.jsx)("div",{children:(0,j.jsx)(x.A,{id:t.id,note:t.note,filterHouses:k})})]})},t.id)))})]},s)})):Object.entries(S).map((t=>{let[s,a]=t;return(0,j.jsxs)("div",{children:[(0,j.jsx)("h5",{children:s}),(0,j.jsxs)(n.A,{striped:!0,bordered:!0,hover:!0,responsive:"sm",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"#"}),(0,j.jsx)("th",{className:"text-start",children:"House"}),(0,j.jsx)("th",{className:"text-start",children:"Type Of work"}),(0,j.jsx)("th",{children:"Status"}),(0,j.jsx)("th",{children:"Note"})]})}),(0,j.jsx)("tbody",{children:a.map((t=>(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{className:"align-middle",children:t.house_id}),(0,j.jsxs)("td",{className:"text-start align-middle w-25",children:[(0,j.jsxs)("b",{children:["Lot ",t.house_name]}),(0,j.jsxs)("div",{className:"d-block",children:[(0,j.jsx)(m.N_,{className:"me-2",to:"/companies/".concat(t.company_id,"/").concat(t.construction_id),children:t.construction_name}),(0,j.jsx)("i",{children:(0,j.jsxs)(m.N_,{to:"/companies/".concat(t.company_id,"/").concat(t.construction_id,"/").concat(t.plan_id),children:["(",t.plan_name,")"]})})]}),t.construction_location&&(0,j.jsx)("div",{className:"d-block mt-2",children:(0,j.jsxs)(r.A,{className:"mx-1",variant:"outline-secondary",href:t.construction_location,target:"_blank",children:[(0,j.jsx)("i",{className:"bi bi-geo-alt-fill me-2"}),"Location"]})}),t.street&&t.city&&t.zip_code&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{}),(0,j.jsx)("span",{className:"text-start me-2 d-block",children:"Address:"}),(0,j.jsxs)("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent("".concat(t.street," ").concat(t.unit,", ").concat(t.city,", ").concat(t.state," ").concat(t.zip_code,", USA"))),target:"_blank",rel:"noopener noreferrer",children:[t.street," ",t.unit,", ",t.city,", ",t.state," ",t.zip_code,", USA"]})]})]}),(0,j.jsx)("td",{className:"align-middle",children:t.type_of_work_name}),(0,j.jsx)("td",{className:"align-middle",children:(0,j.jsx)(o.A.Select,{required:!0,name:"status_id",style:{backgroundColor:t.status_color,color:"white"},onChange:async e=>{const s=e.target.value;await y(t.id,s),k()},children:e.map((e=>(0,j.jsx)("option",{style:{backgroundColor:e.color},selected:e.id===t.status_id,value:e.id,children:e.name})))})}),(0,j.jsx)("td",{className:"align-middle text-end",children:(0,j.jsx)(x.A,{id:t.id,note:t.note,filterHouses:k})})]},t.id)))})]})]},s)}))]})}},9204:(e,t,s)=>{s.d(t,{X:()=>r});var a=s(4131),c=s(9722);const n=s(8478).x+"/api/status",r=(0,a.v)(((e,t)=>({statuses:[],loading:!1,error:null,status:{id:0,name:"",created_at:"",active:!0,sort:500,color:""},fetchStatus:async t=>{e({loading:!0,error:null});try{const s=await c.A.get(n+"/"+t);e({status:s.data,loading:!1})}catch(s){e({error:s.message,loading:!1})}},fetchStatuses:async()=>{e({loading:!0,error:null});try{const t=await c.A.get(n);e({statuses:t.data,loading:!1})}catch(t){e({error:t.message,loading:!1})}},fetchActiveStatuses:async()=>{e({loading:!0,error:null});try{const t=await c.A.get(n+"/active");e({statuses:t.data,loading:!1})}catch(t){e({error:t.message,loading:!1})}},addStatus:async s=>{e({loading:!0,error:null});try{await c.A.post(n,s),await t().fetchStatuses()}catch(a){e({error:a.message})}e({loading:!1})},updateStatus:async s=>{e({loading:!0,error:null});try{await c.A.put(n+"/"+s.id,s),await t().fetchStatuses()}catch(a){e({error:a.message})}e({loading:!1})},deleteStatus:async s=>{e({loading:!0,error:null});try{await c.A.delete("".concat(n,"/").concat(s)),await t().fetchStatuses()}catch(a){e({error:a.message})}e({loading:!1})}})))}}]);
//# sourceMappingURL=975.5a0c92d1.chunk.js.map