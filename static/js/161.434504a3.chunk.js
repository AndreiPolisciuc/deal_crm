"use strict";(self.webpackChunkdeal_crm=self.webpackChunkdeal_crm||[]).push([[161],{1386:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(5043),s=a(3581),o=a(9379),l=a(4889),i=a(9853),c=a(8602),r=a(1072),d=a(4282),x=a(579);const h=e=>{let{id:t,handleCloseEditSidePanel:a}=e;const{construction:s,fetchConstruction:h,updateConstruction:m}=(0,l.g)(),[j,u]=(0,n.useState)({id:0,name:"",text:"",active:!0,location:"",company_id:0}),[A,p]=(0,n.useState)(!1),v=e=>{u((0,o.A)((0,o.A)({},j),{},{[e.target.name]:e.target.value}))};return(0,n.useEffect)((()=>{h(t)}),[]),(0,n.useEffect)((()=>{u({id:t,name:null===s||void 0===s?void 0:s.name,text:null===s||void 0===s?void 0:s.text,active:null===s||void 0===s?void 0:s.active,company_id:null===s||void 0===s?void 0:s.company_id,location:null===s||void 0===s?void 0:s.location})}),[s]),(0,x.jsx)(i.A,{noValidate:!0,validated:A,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),p(!0),!1!==t.checkValidity()&&(await m(j),u({id:0,name:"",text:"",active:!0,location:"",company_id:0}),a())},children:(0,x.jsxs)(c.A,{className:"mb-3 text-start ",children:[(0,x.jsx)(r.A,{className:"mb-3 text-start ",children:(0,x.jsxs)(i.A.Group,{controlId:"validationCustom01",children:[(0,x.jsx)(i.A.Label,{children:"Construction Name"}),(0,x.jsx)(i.A.Control,{name:"name",required:!0,type:"text",placeholder:"Construction Name",value:j.name,onChange:v}),(0,x.jsx)(i.A.Control.Feedback,{children:"Looks good!"})]})}),(0,x.jsx)(r.A,{className:"mb-3 text-start ",children:(0,x.jsxs)(i.A.Group,{controlId:"validationCustom01",children:[(0,x.jsx)(i.A.Label,{children:"Location"}),(0,x.jsx)(i.A.Control,{name:"location",type:"text",placeholder:"Location",value:j.location,onChange:v}),(0,x.jsx)(i.A.Control.Feedback,{children:"Looks good!"})]})}),(0,x.jsx)(r.A,{className:"mb-3 text-start ",children:(0,x.jsx)(i.A.Group,{children:(0,x.jsx)(i.A.Check,{checked:j.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>u((0,o.A)((0,o.A)({},j),{},{active:e.target.checked}))})})}),(0,x.jsx)(r.A,{className:"mb-3 text-start",children:(0,x.jsxs)(i.A.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,x.jsx)(i.A.Label,{children:"Text"}),(0,x.jsx)(i.A.Control,{className:"mb-3",as:"textarea",rows:3,name:"text",value:j.text,onChange:v})]})}),(0,x.jsx)(d.A,{className:"mx-1",type:"submit",children:"Update"}),(0,x.jsx)(d.A,{onClick:a,className:"mx-1",variant:"danger",children:"Cancel"})]})})},m=e=>{let{id:t,showEditSidePanel:a,handleCloseEditSidePanel:n}=e;return(0,x.jsxs)(s.A,{show:a,onHide:n,placement:"end",children:[(0,x.jsx)(s.A.Header,{closeButton:!0,children:(0,x.jsx)(s.A.Title,{children:"Edit Construction"})}),(0,x.jsx)(s.A.Body,{children:(0,x.jsx)(h,{id:t,handleCloseEditSidePanel:n})})]})}},3822:(e,t,a)=>{a.d(t,{A:()=>l});var n=a(9397),s=a(9002),o=a(579);const l=e=>{let{openPageName:t}=e;const a=(0,s.zy)().pathname.split("/").filter(Boolean);return(0,o.jsxs)(n.A,{children:[(0,o.jsx)(n.A.Item,{linkAs:s.N_,linkProps:{to:"/"},children:"Home"}),a.map(((e,l)=>{const i="/"+a.slice(0,l+1).join("/");return l===a.length-1?(0,o.jsx)(n.A.Item,{active:!0,children:t},i):(0,o.jsx)(n.A.Item,{linkAs:s.N_,linkProps:{to:i},children:decodeURIComponent(e)},i)}))]})}},4196:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(9379),s=a(45),o=a(8139),l=a.n(o),i=a(5043),c=a(7852),r=a(579);const d=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],x=i.forwardRef(((e,t)=>{let{bsPrefix:a,className:o,striped:i,bordered:x,borderless:h,hover:m,size:j,variant:u,responsive:A}=e,p=(0,s.A)(e,d);const v=(0,c.oU)(a,"table"),C=l()(o,v,u&&"".concat(v,"-").concat(u),j&&"".concat(v,"-").concat(j),i&&"".concat(v,"-").concat("string"===typeof i?"striped-".concat(i):"striped"),x&&"".concat(v,"-bordered"),h&&"".concat(v,"-borderless"),m&&"".concat(v,"-hover")),b=(0,r.jsx)("table",(0,n.A)((0,n.A)({},p),{},{className:C,ref:t}));if(A){let e="".concat(v,"-responsive");return"string"===typeof A&&(e="".concat(e,"-").concat(A)),(0,r.jsx)("div",{className:e,children:b})}return b}));x.displayName="Table";const h=x},6161:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var n=a(5043),s=a(7339),o=a(9002),l=a(3519),i=a(4282),c=a(1719),r=a(3822),d=a(4889),x=a(4196),h=a(3083),m=a(579);const j=e=>{let{id:t,company_id:a,showDeleteModal:n,handleCloseDeleteModal:s}=e;const{deleteConstruction:o}=(0,d.g)();return(0,m.jsxs)(h.A,{show:n,onHide:s,centered:!0,children:[(0,m.jsx)(h.A.Header,{closeButton:!0,children:(0,m.jsx)(h.A.Title,{children:"Warning"})}),(0,m.jsx)(h.A.Body,{children:"Are you sure you want to delete the construction?"}),(0,m.jsxs)(h.A.Footer,{children:[(0,m.jsx)(i.A,{variant:"secondary",onClick:s,children:"Cancel"}),(0,m.jsx)(i.A,{variant:"danger",onClick:()=>{s(),o(t,a)},children:"Delete"})]})]})};var u=a(1386);const A=e=>{let{company_id:t}=e;const{constructions:a,fetchConstructionsInCompany:s}=(0,d.g)(),[l,c]=(0,n.useState)(0),[r,h]=(0,n.useState)(!1),[A,p]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{s(t)}),[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(x.A,{striped:!0,bordered:!0,hover:!0,children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"#"}),(0,m.jsx)("th",{className:"text-start",children:"Name"}),(0,m.jsx)("th",{children:"Created at"}),(0,m.jsx)("th",{children:"Action"})]})}),(0,m.jsx)("tbody",{children:a.map((e=>(0,m.jsxs)("tr",{className:e.active?"":"table-secondary text-muted",children:[(0,m.jsx)("td",{children:e.id}),(0,m.jsx)("td",{className:"text-start",children:(0,m.jsx)(o.N_,{to:"/companies/".concat(e.company_id,"/").concat(e.id),children:e.name})}),(0,m.jsx)("td",{className:"w-25",children:new Date(e.created_at).toLocaleString()}),(0,m.jsxs)("td",{children:[(0,m.jsx)(i.A,{variant:"secondary",className:"m-1",onClick:()=>(e=>{c(e),p(!0)})(e.id),children:(0,m.jsx)("i",{className:"bi bi-pencil"})}),e.location?(0,m.jsx)(i.A,{className:"m-1",variant:"secondary",href:e.location,target:"_blank",children:(0,m.jsx)("i",{className:"bi bi-geo-alt-fill"})}):"",(0,m.jsx)(i.A,{className:"m-1",variant:"danger",onClick:()=>(e=>{c(e),h(!0)})(e.id),children:(0,m.jsx)("i",{className:"bi bi-trash"})})]})]},e.id)))})]}),(0,m.jsx)(j,{id:l,company_id:t,showDeleteModal:r,handleCloseDeleteModal:()=>{h(!1),c(0)}}),(0,m.jsx)(u.A,{id:l,showEditSidePanel:A,handleCloseEditSidePanel:()=>{p(!1),c(0)}})]})};var p=a(9472),v=a(3581),C=a(9379),b=a(9853),y=a(8602),N=a(1072);const g=e=>{let{handleClose:t,company_id:a}=e;const[s,o]=(0,n.useState)({name:"",text:"",company_id:a,location:""}),[l,c]=(0,n.useState)(!1),r=(0,d.g)((e=>e.addConstruction)),x=e=>{o((0,C.A)((0,C.A)({},s),{},{[e.target.name]:e.target.value}))};return(0,m.jsx)(b.A,{noValidate:!0,validated:l,onSubmit:async e=>{const n=e.currentTarget;e.preventDefault(),!1===n.checkValidity()&&(e.preventDefault(),e.stopPropagation()),c(!0),!1!==n.checkValidity()&&(await r(s),o({name:"",text:"",company_id:a,location:""}),t())},children:(0,m.jsxs)(y.A,{className:"mb-3 text-start ",children:[(0,m.jsx)(N.A,{className:"mb-3 text-start ",children:(0,m.jsxs)(b.A.Group,{controlId:"validationCustom01",children:[(0,m.jsx)(b.A.Label,{children:"Construction name*"}),(0,m.jsx)(b.A.Control,{name:"name",required:!0,type:"text",placeholder:"Construction Name",value:s.name,onChange:x}),(0,m.jsx)(b.A.Control.Feedback,{children:"Looks good!"})]})}),(0,m.jsx)(N.A,{className:"mb-3 text-start ",children:(0,m.jsxs)(b.A.Group,{controlId:"validationCustom03",children:[(0,m.jsx)(b.A.Label,{children:"Location"}),(0,m.jsx)(b.A.Control,{name:"location",type:"text",placeholder:"Location",value:s.location,onChange:x}),(0,m.jsx)(b.A.Control.Feedback,{children:"Looks good!"})]})}),(0,m.jsx)(N.A,{className:"mb-3 text-start",children:(0,m.jsxs)(b.A.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,m.jsx)(b.A.Label,{children:"Text"}),(0,m.jsx)(b.A.Control,{className:"mb-3",as:"textarea",rows:3,name:"text",value:s.text,onChange:x})]})}),(0,m.jsx)(i.A,{className:"mx-1",type:"submit",children:"Create"}),(0,m.jsx)(i.A,{onClick:t,className:"mx-1",variant:"danger",children:"Cancel"})]})})},k=e=>{let{show:t,handleClose:a,company_id:n}=e;return(0,m.jsxs)(v.A,{show:t,placement:"end",onHide:a,scroll:!0,children:[(0,m.jsx)(v.A.Header,{closeButton:!0,children:(0,m.jsx)(v.A.Title,{children:"Create Company"})}),(0,m.jsx)(v.A.Body,{children:(0,m.jsx)(g,{handleClose:a,company_id:n})})]})},f=()=>{const{id:e}=(0,o.g)(),t=Number(e),{company:a,fetchCompany:d}=(0,s.o)(),x=(0,o.Zp)(),[h,j]=(0,n.useState)(!1),[u,v]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{d(t)}),[h]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.A,{children:[(0,m.jsx)("h1",{children:a.name}),(0,m.jsx)("hr",{}),(0,m.jsx)(i.A,{className:"me-2",variant:"outline-secondary",onClick:()=>x("/companies/"),children:(0,m.jsx)("i",{className:"bi bi-arrow-left-circle"})}),(0,m.jsxs)(i.A,{className:"ms-3",variant:"outline-secondary",onClick:()=>(a.id,void j(!0)),children:[(0,m.jsx)("i",{className:"bi bi-pencil me-2"}),"Edit"]}),(0,m.jsx)("hr",{}),(0,m.jsx)(r.A,{openPageName:a.name}),!a.active&&(0,m.jsx)(c.A,{variant:"danger",children:"Not active!"},"danger"),a.text?(0,m.jsx)("p",{children:a.text}):null,(0,m.jsx)("hr",{}),(0,m.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,m.jsx)("h4",{children:"Constructions"}),(0,m.jsxs)(i.A,{variant:"primary",onClick:()=>v(!0),children:[(0,m.jsx)("i",{className:"me-2 bi bi-plus-circle"}),"Add Construction"]})]}),(0,m.jsx)(A,{company_id:t})]}),(0,m.jsx)(k,{show:u,handleClose:()=>v(!1),company_id:t}),(0,m.jsx)(p.A,{id:t,showEditSidePanel:h,handleCloseEditSidePanel:()=>{j(!1)}})]})}},9472:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(5043),s=a(3581),o=a(9379),l=a(9853),i=a(8602),c=a(1072),r=a(4282),d=a(7339),x=a(579);const h=e=>{let{id:t,handleCloseEditSidePanel:a}=e;const{company:s,fetchCompany:h,updateCompany:m}=(0,d.o)(),[j,u]=(0,n.useState)({id:0,name:"",text:"",active:!0}),[A,p]=(0,n.useState)(!1),v=e=>{u((0,o.A)((0,o.A)({},j),{},{[e.target.name]:e.target.value}))};return(0,n.useEffect)((()=>{h(t)}),[]),(0,n.useEffect)((()=>{u({id:t,name:null===s||void 0===s?void 0:s.name,text:null===s||void 0===s?void 0:s.text,active:null===s||void 0===s?void 0:s.active})}),[s]),(0,x.jsx)(l.A,{noValidate:!0,validated:A,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),p(!0),!1!==t.checkValidity()&&(await m(j),u({id:0,name:"",text:"",active:!0}),a())},children:(0,x.jsxs)(i.A,{className:"mb-3 text-start ",children:[(0,x.jsx)(c.A,{className:"mb-3 text-start ",children:(0,x.jsxs)(l.A.Group,{controlId:"validationCustom01",children:[(0,x.jsx)(l.A.Label,{children:"Company Name"}),(0,x.jsx)(l.A.Control,{name:"name",required:!0,type:"text",placeholder:"Company Name",value:j.name,onChange:v}),(0,x.jsx)(l.A.Control.Feedback,{children:"Looks good!"})]})}),(0,x.jsx)(c.A,{className:"mb-3 text-start ",children:(0,x.jsx)(l.A.Group,{children:(0,x.jsx)(l.A.Check,{checked:j.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>u((0,o.A)((0,o.A)({},j),{},{active:e.target.checked}))})})}),(0,x.jsx)(c.A,{className:"mb-3 text-start",children:(0,x.jsxs)(l.A.Group,{controlId:"exampleForm.ControlTextarea1",children:[(0,x.jsx)(l.A.Label,{children:"Text"}),(0,x.jsx)(l.A.Control,{className:"mb-3",as:"textarea",rows:3,name:"text",value:j.text,onChange:v})]})}),(0,x.jsx)(r.A,{className:"mx-1",type:"submit",children:"Update"}),(0,x.jsx)(r.A,{onClick:a,className:"mx-1",variant:"danger",children:"Cancel"})]})})},m=e=>{let{id:t,showEditSidePanel:a,handleCloseEditSidePanel:n}=e;return(0,x.jsxs)(s.A,{show:a,onHide:n,placement:"end",children:[(0,x.jsx)(s.A.Header,{closeButton:!0,children:(0,x.jsx)(s.A.Title,{children:"Edit Company"})}),(0,x.jsx)(s.A.Body,{children:(0,x.jsx)(h,{id:t,handleCloseEditSidePanel:n})})]})}}}]);
//# sourceMappingURL=161.434504a3.chunk.js.map