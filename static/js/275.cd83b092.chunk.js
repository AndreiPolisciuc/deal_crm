"use strict";(self.webpackChunkdeal_crm=self.webpackChunkdeal_crm||[]).push([[275],{3275:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(5043),r=a(3519),l=a(4282),n=a(3822),o=a(4196),c=a(9204),d=a(3083),i=a(579);const h=e=>{let{id:t,showDeleteModal:a,handleCloseDeleteModal:s}=e;const{deleteStatus:r}=(0,c.X)();return(0,i.jsxs)(d.A,{show:a,onHide:s,centered:!0,children:[(0,i.jsx)(d.A.Header,{closeButton:!0,children:(0,i.jsx)(d.A.Title,{children:"Warning"})}),(0,i.jsx)(d.A.Body,{children:"Are you sure you want to delete the status?"}),(0,i.jsxs)(d.A.Footer,{children:[(0,i.jsx)(l.A,{variant:"secondary",onClick:s,children:"Cancel"}),(0,i.jsx)(l.A,{variant:"danger",onClick:()=>{s(),r(t)},children:"Delete"})]})]})};var u=a(3581),x=a(9379),m=a(9853),j=a(8602),A=a(1072);const v=e=>{let{id:t,handleCloseEditSidePanel:a}=e;const{status:r,fetchStatus:n,updateStatus:o}=(0,c.X)(),[d,h]=(0,s.useState)({id:0,name:"",active:!0,sort:500,color:""}),[u,v]=(0,s.useState)(!1),g=e=>{h((0,x.A)((0,x.A)({},d),{},{[e.target.name]:e.target.value}))};return(0,s.useEffect)((()=>{n(t)}),[]),(0,s.useEffect)((()=>{h({id:t,name:null===r||void 0===r?void 0:r.name,color:null===r||void 0===r?void 0:r.color,active:null===r||void 0===r?void 0:r.active,sort:null===r||void 0===r?void 0:r.sort})}),[r]),(0,i.jsx)(m.A,{noValidate:!0,validated:u,onSubmit:async e=>{const t=e.currentTarget;e.preventDefault(),!1===t.checkValidity()&&(e.preventDefault(),e.stopPropagation()),v(!0),!1!==t.checkValidity()&&(await o(d),h({id:0,name:"",active:!0,sort:500,color:""}),a())},children:(0,i.jsxs)(j.A,{className:"mb-3 text-start ",children:[(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{controlId:"validationCustom01",children:[(0,i.jsx)(m.A.Label,{children:"Status Name*"}),(0,i.jsx)(m.A.Control,{name:"name",required:!0,type:"text",placeholder:"Status Name",value:d.name,onChange:g}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{controlId:"validationCustom01",children:[(0,i.jsx)(m.A.Label,{children:"Status Color"}),(0,i.jsx)(m.A.Control,{name:"color",type:"color",value:d.color,onChange:g}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{controlId:"validationCustom01",children:[(0,i.jsx)(m.A.Label,{children:"Sort*"}),(0,i.jsx)(m.A.Control,{name:"sort",required:!0,type:"number",value:d.sort,onChange:g}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsx)(m.A.Group,{children:(0,i.jsx)(m.A.Check,{checked:d.active,type:"switch",id:"custom-switch",label:"Active",onChange:e=>h((0,x.A)((0,x.A)({},d),{},{active:e.target.checked}))})})}),(0,i.jsx)(l.A,{className:"mx-1",type:"submit",children:"Update"}),(0,i.jsx)(l.A,{onClick:a,className:"mx-1",variant:"danger",children:"Cancel"})]})})},g=e=>{let{id:t,showEditSidePanel:a,handleCloseEditSidePanel:s}=e;return(0,i.jsxs)(u.A,{show:a,onHide:s,placement:"end",children:[(0,i.jsx)(u.A.Header,{closeButton:!0,children:(0,i.jsx)(u.A.Title,{children:"Edit Status"})}),(0,i.jsx)(u.A.Body,{children:(0,i.jsx)(v,{id:t,handleCloseEditSidePanel:s})})]})},p=()=>{const{statuses:e,fetchStatuses:t}=(0,c.X)(),[a,r]=(0,s.useState)(0),[n,d]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{t()}),[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.A,{striped:!0,bordered:!0,hover:!0,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"#"}),(0,i.jsx)("th",{className:"text-start",children:"Name"}),(0,i.jsx)("th",{children:"Sort"}),(0,i.jsx)("th",{children:"Action"})]})}),(0,i.jsx)("tbody",{children:e.map((e=>(0,i.jsxs)("tr",{className:e.active?"":"table-secondary text-muted",style:{"--bs-table-bg":e.color},children:[(0,i.jsx)("td",{children:e.id}),(0,i.jsx)("td",{className:"text-start",children:e.name}),(0,i.jsx)("td",{className:"w-25",children:e.sort}),(0,i.jsxs)("td",{children:[(0,i.jsx)(l.A,{variant:"secondary",className:"m-1",onClick:()=>(e=>{r(e),x(!0)})(e.id),children:(0,i.jsx)("i",{className:"bi bi-pencil"})}),5!==e.id&&1!==e.id&&(0,i.jsx)(l.A,{variant:"danger",className:"m-1",onClick:()=>(e=>{r(e),d(!0)})(e.id),children:(0,i.jsx)("i",{className:"bi bi-trash"})})]})]},e.id)))})]}),(0,i.jsx)(h,{id:a,showDeleteModal:n,handleCloseDeleteModal:()=>{d(!1),r(0)}}),(0,i.jsx)(g,{id:a,showEditSidePanel:u,handleCloseEditSidePanel:()=>{x(!1),r(0)}})]})},b=e=>{let{handleClose:t}=e;const[a,r]=(0,s.useState)({name:"",sort:500,color:""}),[n,o]=(0,s.useState)(!1),d=(0,c.X)((e=>e.addStatus)),h=e=>{r((0,x.A)((0,x.A)({},a),{},{[e.target.name]:e.target.value}))};return(0,i.jsx)(m.A,{noValidate:!0,validated:n,onSubmit:async e=>{const s=e.currentTarget;e.preventDefault(),console.log(a),!1===s.checkValidity()&&(e.preventDefault(),e.stopPropagation()),o(!0),!1!==s.checkValidity()&&(await d(a),r({name:"",sort:500,color:""}),t())},children:(0,i.jsxs)(j.A,{className:"mb-3 text-start ",children:[(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{controlId:"validationCustom01",children:[(0,i.jsx)(m.A.Label,{children:"Status Name*"}),(0,i.jsx)(m.A.Control,{name:"name",required:!0,type:"text",placeholder:"Status Name",value:a.name,onChange:h}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{children:[(0,i.jsx)(m.A.Label,{children:"Status Color"}),(0,i.jsx)(m.A.Control,{name:"color",type:"color",value:a.color,onChange:h}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(A.A,{className:"mb-3 text-start ",children:(0,i.jsxs)(m.A.Group,{controlId:"validationCustom01",children:[(0,i.jsx)(m.A.Label,{children:"Sort*"}),(0,i.jsx)(m.A.Control,{name:"sort",required:!0,type:"number",defaultValue:500,value:a.sort,onChange:h}),(0,i.jsx)(m.A.Control.Feedback,{children:"Looks good!"})]})}),(0,i.jsx)(l.A,{className:"mx-1",type:"submit",children:"Create"}),(0,i.jsx)(l.A,{onClick:t,className:"mx-1",variant:"danger",children:"Cancel"})]})})},C=e=>{let{show:t,handleClose:a}=e;return(0,i.jsxs)(u.A,{show:t,placement:"end",onHide:a,scroll:!0,children:[(0,i.jsx)(u.A.Header,{closeButton:!0,children:(0,i.jsx)(u.A.Title,{children:"Create Status"})}),(0,i.jsx)(u.A.Body,{children:(0,i.jsx)(b,{handleClose:a})})]})},S=()=>{const[e,t]=(0,s.useState)(!1);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.A,{children:[(0,i.jsx)("h1",{children:"Statuses"}),(0,i.jsx)(n.A,{openPageName:"Statuses"}),(0,i.jsx)("div",{className:"d-flex justify-content-end mb-3",children:(0,i.jsxs)(l.A,{variant:"primary",onClick:()=>t(!0),children:[(0,i.jsx)("i",{className:"me-2 bi bi-plus-circle"}),"Add Status"]})}),(0,i.jsx)(p,{})]}),(0,i.jsx)(C,{show:e,handleClose:()=>t(!1)})]})}},3822:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(9397),r=a(9002),l=a(579);const n=e=>{let{openPageName:t}=e;const a=(0,r.zy)().pathname.split("/").filter(Boolean);return(0,l.jsxs)(s.A,{children:[(0,l.jsx)(s.A.Item,{linkAs:r.N_,linkProps:{to:"/"},children:"Home"}),a.map(((e,n)=>{const o="/"+a.slice(0,n+1).join("/");return n===a.length-1?(0,l.jsx)(s.A.Item,{active:!0,children:t},o):(0,l.jsx)(s.A.Item,{linkAs:r.N_,linkProps:{to:o},children:decodeURIComponent(e)},o)}))]})}},4196:(e,t,a)=>{a.d(t,{A:()=>u});var s=a(9379),r=a(45),l=a(8139),n=a.n(l),o=a(5043),c=a(7852),d=a(579);const i=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],h=o.forwardRef(((e,t)=>{let{bsPrefix:a,className:l,striped:o,bordered:h,borderless:u,hover:x,size:m,variant:j,responsive:A}=e,v=(0,r.A)(e,i);const g=(0,c.oU)(a,"table"),p=n()(l,g,j&&"".concat(g,"-").concat(j),m&&"".concat(g,"-").concat(m),o&&"".concat(g,"-").concat("string"===typeof o?"striped-".concat(o):"striped"),h&&"".concat(g,"-bordered"),u&&"".concat(g,"-borderless"),x&&"".concat(g,"-hover")),b=(0,d.jsx)("table",(0,s.A)((0,s.A)({},v),{},{className:p,ref:t}));if(A){let e="".concat(g,"-responsive");return"string"===typeof A&&(e="".concat(e,"-").concat(A)),(0,d.jsx)("div",{className:e,children:b})}return b}));h.displayName="Table";const u=h},9204:(e,t,a)=>{a.d(t,{X:()=>n});var s=a(4131),r=a(9722);const l=a(8478).x+"/api/status",n=(0,s.v)(((e,t)=>({statuses:[],loading:!1,error:null,status:{id:0,name:"",created_at:"",active:!0,sort:500,color:""},fetchStatus:async t=>{e({loading:!0,error:null});try{const a=await r.A.get(l+"/"+t);e({status:a.data,loading:!1})}catch(a){e({error:a.message,loading:!1})}},fetchStatuses:async()=>{e({loading:!0,error:null});try{const t=await r.A.get(l);e({statuses:t.data,loading:!1})}catch(t){e({error:t.message,loading:!1})}},fetchActiveStatuses:async()=>{e({loading:!0,error:null});try{const t=await r.A.get(l+"/active");e({statuses:t.data,loading:!1})}catch(t){e({error:t.message,loading:!1})}},addStatus:async a=>{e({loading:!0,error:null});try{await r.A.post(l,a),await t().fetchStatuses()}catch(s){e({error:s.message})}e({loading:!1})},updateStatus:async a=>{e({loading:!0,error:null});try{await r.A.put(l+"/"+a.id,a),await t().fetchStatuses()}catch(s){e({error:s.message})}e({loading:!1})},deleteStatus:async a=>{e({loading:!0,error:null});try{await r.A.delete("".concat(l,"/").concat(a)),await t().fetchStatuses()}catch(s){e({error:s.message})}e({loading:!1})}})))}}]);
//# sourceMappingURL=275.cd83b092.chunk.js.map